#!/bin/bash

# Augment Flask Proxy Starter
# Double-click dette script for at starte Flask proxy

clear
echo "============================================"
echo "  üöÄ AUGMENT FLASK PROXY"
echo "============================================"
echo ""

# Check om Flask er installeret
python3 -c "import flask" 2>/dev/null
if [ $? -ne 0 ]; then
    echo "‚ùå Flask er ikke installeret!"
    echo ""
    echo "K√∏r f√∏rst 'setup_flask_proxy.sh' for at installere."
    echo ""
    read -p "Tryk Enter for at lukke..."
    exit 1
fi

# Find IP adresse
IP_ADDRESS=$(hostname -I | awk '{print $1}')

if [ -z "$IP_ADDRESS" ]; then
    IP_ADDRESS="DIN-COMPUTER-IP"
fi

echo "‚úÖ Flask proxy klar!"
echo ""
echo "============================================"
echo "  üì± ANDROID TELEFON SETUP"
echo "============================================"
echo ""
echo "1Ô∏è‚É£  √Öbn WiFi indstillinger p√• din telefon"
echo "    - Hold finger p√• dit WiFi netv√¶rk"
echo "    - V√¶lg 'Modificer netv√¶rk' eller 'Avanceret'"
echo ""
echo "2Ô∏è‚É£  S√¶t Proxy til MANUEL:"
echo "    - Proxy hostname: $IP_ADDRESS"
echo "    - Proxy port: 8888"
echo "    - Gem √¶ndringer"
echo ""
echo "3Ô∏è‚É£  √Öbn Augment app og trigger firmware update"
echo ""
echo "============================================"
echo "  üíª COMPUTER DASHBOARD"
echo "============================================"
echo ""
echo "üìä √Öbn dashboard i browser:"
echo "    http://127.0.0.1:5000"
echo ""
echo "Se live captured data:"
echo "  ‚Ä¢ Firmware URLs (auto-downloaded!)"
echo "  ‚Ä¢ GraphQL queries"
echo "  ‚Ä¢ Alle HTTP requests"
echo ""
echo "============================================"
echo ""
echo "üöÄ Starter Flask proxy nu..."
echo ""
echo "‚ö†Ô∏è  VIGTIGT: Lad dette vindue v√¶re √•bent!"
echo "    Luk det F√òRST n√•r du er f√¶rdig."
echo ""
echo "============================================"
echo ""

# Start Flask proxy
python3 flask_proxy.py

echo ""
echo "Flask proxy stoppet."
read -p "Tryk Enter for at lukke..."
