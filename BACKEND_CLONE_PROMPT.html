<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Augment Backend - Complete Technical Specification</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">Augment Backend - Complete Technical
Specification</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#augment-e-scooter-backend---præcis-klonings-prompt"
id="toc-augment-e-scooter-backend---præcis-klonings-prompt">AUGMENT
E-SCOOTER BACKEND - PRÆCIS KLONINGS PROMPT</a>
<ul>
<li><a href="#oversigt" id="toc-oversigt">OVERSIGT</a></li>
<li><a href="#teknisk-stack" id="toc-teknisk-stack">1. TEKNISK
STACK</a></li>
<li><a href="#api-struktur" id="toc-api-struktur">2. API
STRUKTUR</a></li>
<li><a href="#database-schema" id="toc-database-schema">3. DATABASE
SCHEMA</a></li>
<li><a href="#aws-cognito-konfiguration"
id="toc-aws-cognito-konfiguration">4. AWS COGNITO KONFIGURATION</a></li>
<li><a href="#chargebee-integration" id="toc-chargebee-integration">5.
CHARGEBEE INTEGRATION</a></li>
<li><a href="#bluetooth-device-protocol"
id="toc-bluetooth-device-protocol">6. BLUETOOTH DEVICE PROTOCOL</a></li>
<li><a href="#websocket-stream-protocol"
id="toc-websocket-stream-protocol">7. WEBSOCKET STREAM PROTOCOL</a></li>
<li><a href="#referral-system" id="toc-referral-system">8. REFERRAL
SYSTEM</a></li>
<li><a href="#firmware-ota-updates" id="toc-firmware-ota-updates">9.
FIRMWARE OTA UPDATES</a></li>
<li><a href="#multi-language-support"
id="toc-multi-language-support">10. MULTI-LANGUAGE SUPPORT</a></li>
<li><a href="#push-notifications" id="toc-push-notifications">11. PUSH
NOTIFICATIONS</a></li>
<li><a href="#analytics-monitoring" id="toc-analytics-monitoring">12.
ANALYTICS &amp; MONITORING</a></li>
<li><a href="#environment-variables" id="toc-environment-variables">13.
ENVIRONMENT VARIABLES</a></li>
<li><a href="#security-considerations"
id="toc-security-considerations">14. SECURITY CONSIDERATIONS</a></li>
<li><a href="#deployment-architecture"
id="toc-deployment-architecture">15. DEPLOYMENT ARCHITECTURE</a></li>
<li><a href="#implementation-checklist"
id="toc-implementation-checklist">16. IMPLEMENTATION CHECKLIST</a></li>
<li><a href="#api-rate-limits" id="toc-api-rate-limits">17. API RATE
LIMITS</a></li>
<li><a href="#sample-graphql-requests"
id="toc-sample-graphql-requests">18. SAMPLE GRAPHQL REQUESTS</a></li>
<li><a href="#error-codes" id="toc-error-codes">19. ERROR CODES</a></li>
<li><a href="#testing-endpoints" id="toc-testing-endpoints">20. TESTING
ENDPOINTS</a></li>
</ul></li>
</ul>
</nav>
<h1 id="augment-e-scooter-backend---præcis-klonings-prompt">AUGMENT
E-SCOOTER BACKEND - PRÆCIS KLONINGS PROMPT</h1>
<h2 id="oversigt">OVERSIGT</h2>
<p>Denne prompt indeholder alle tekniske detaljer til at klone
backend’en for Augment e-scooter sharing platformen, baseret på analyse
af den Android APK.</p>
<hr />
<h2 id="teknisk-stack">1. TEKNISK STACK</h2>
<h3 id="backend-infrastructure">Backend Infrastructure</h3>
<ul>
<li><strong>API Type</strong>: GraphQL API (primary) + REST
endpoints</li>
<li><strong>Hosting</strong>: AWS Infrastructure
<ul>
<li>AWS Lambda (serverless functions)</li>
<li>AWS API Gateway</li>
<li>AWS Cognito (authentication)</li>
</ul></li>
<li><strong>Database</strong>: PostgreSQL via Supabase
<ul>
<li>PostgREST API layer</li>
</ul></li>
<li><strong>Real-time</strong>: WebSocket server på port 8969
(<code>/stream</code> endpoint)</li>
<li><strong>CDN/Hosting</strong>: Netlify (staging:
<code>https://staging--augment-escoot.netlify.app</code>)</li>
</ul>
<h3 id="tredjeparts-services">Tredjeparts Services</h3>
<ul>
<li><strong>Payment Processing</strong>: Chargebee</li>
<li><strong>Analytics/Monitoring</strong>:
<ul>
<li>Sentry
(<code>https://o447951.ingest.sentry.io/api/4509632503087104/envelope/</code>)</li>
<li>Firebase Analytics</li>
</ul></li>
<li><strong>Customer Support</strong>: Intercom</li>
<li><strong>Notifications</strong>:
<ul>
<li>Firebase Cloud Messaging</li>
<li>OneSignal</li>
</ul></li>
</ul>
<h3 id="authentication-security">Authentication &amp; Security</h3>
<ul>
<li>AWS Cognito Identity &amp; User Pools</li>
<li>OAuth2 flow med refresh tokens</li>
<li>MFA support (SMS, TOTP, EMAIL_OTP)</li>
<li>WebAuthn/Passkey support</li>
</ul>
<hr />
<h2 id="api-struktur">2. API STRUKTUR</h2>
<h3 id="graphql-api-endpoint">GraphQL API Endpoint</h3>
<pre><code>Main Production: https://frbc72oc4h.execute-api.eu-west-1.amazonaws.com/prod/graphql-public
Staging: https://staging--augment-escoot.netlify.app</code></pre>
<h3 id="websocket-stream-endpoint">WebSocket Stream Endpoint</h3>
<pre><code>Development: http://localhost:8969/stream
Production: wss://[domain]:8969/stream</code></pre>
<h3 id="primære-graphql-queries">Primære GraphQL Queries</h3>
<h4 id="user-management">User Management</h4>
<div class="sourceCode" id="cb3"><pre
class="sourceCode graphql"><code class="sourceCode graphql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">query</span> MeAccountDetails</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">query</span> MeCountry</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">query</span> MeFirstPromoter</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">query</span> MeSubscriptions</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="kw">query</span> MeInvoices(<span class="va">$country</span>: CountryCode, <span class="va">$language</span>: Language!)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="kw">query</span> MePaymentSources</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="kw">query</span> MePayNow</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="kw">query</span> MeManagePayment</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="kw">query</span> MeDevices</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="kw">query</span> IntercomHexCodes</span></code></pre></div>
<h4 id="device-management">Device Management</h4>
<div class="sourceCode" id="cb4"><pre
class="sourceCode graphql"><code class="sourceCode graphql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">query</span> CheckDeviceOwnership(<span class="va">$input</span>: CheckDeviceOwnershipInput!)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">query</span> DeviceQuery(<span class="va">$input</span>: DeviceQueryInput!)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="kw">query</span> DeviceSubUsers(<span class="va">$input</span>: DeviceQueryInput!)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">query</span> DeviceSettingsOperationCode(<span class="va">$btMac</span>: MACHX!)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="kw">query</span> FirmwareUpgrade(<span class="va">$firmware</span>: CheckFirmwareUpgradeInput!, <span class="va">$language</span>: Language)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="kw">query</span> GetCertificationStandardChangeCode(<span class="va">$btMac</span>: MACHX!, <span class="va">$certificationStandard</span>: CertificationStandard!)</span></code></pre></div>
<h4 id="system">System</h4>
<div class="sourceCode" id="cb5"><pre
class="sourceCode graphql"><code class="sourceCode graphql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">query</span> MandatoryMobileUpdate(<span class="va">$input</span>: CheckMandatoryMobileAppStoreUpgrade!)</span></code></pre></div>
<h3 id="primære-graphql-mutations">Primære GraphQL Mutations</h3>
<h4 id="device-operations">Device Operations</h4>
<div class="sourceCode" id="cb6"><pre
class="sourceCode graphql"><code class="sourceCode graphql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">mutation</span> ClaimDeviceOwnership(<span class="va">$input</span>: ClaimDeviceOwnershipInput!)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">mutation</span> ResetDeviceOwnership(<span class="va">$input</span>: ResetDeviceOwnershipInput!)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="kw">mutation</span> RenameDevice(<span class="va">$input</span>: RenameDeviceInput!)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="kw">mutation</span> ChangeDeviceIdentifiers(<span class="va">$input</span>: AdminChangeDeviceIdentifiersInput!)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="kw">mutation</span> ChangeDeviceSharingSettings(<span class="va">$input</span>: ChangeDeviceSharingSettingsInput!)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="kw">mutation</span> AddDeviceStatus(<span class="va">$input</span>: AddDeviceStatusInput!)</span></code></pre></div>
<h4 id="sharing">Sharing</h4>
<div class="sourceCode" id="cb7"><pre
class="sourceCode graphql"><code class="sourceCode graphql"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">mutation</span> ShareDeviceOtp(<span class="va">$input</span>: GenerateDeviceAccessOtpInput!)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">mutation</span> ConsumeShareDeviceOtp(<span class="va">$input</span>: ConsumeShareDeviceOtpInput!)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="kw">mutation</span> RevokeAccessToOwnersDevice(<span class="va">$input</span>: RevokeAccessToOwnersDeviceInput!)</span></code></pre></div>
<h4 id="payment">Payment</h4>
<div class="sourceCode" id="cb8"><pre
class="sourceCode graphql"><code class="sourceCode graphql"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">mutation</span> AssignPaymentSourceRole(<span class="va">$input</span>: AssignChargebeePaymentSourceRoleInput!)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">mutation</span> ChargebeeInvoicePdf(<span class="va">$createChargebeeInvoicePdfInput</span>: CreateChargebeeInvoicePdfInput!)</span></code></pre></div>
<h3 id="graphql-fragments">GraphQL Fragments</h3>
<div class="sourceCode" id="cb9"><pre
class="sourceCode graphql"><code class="sourceCode graphql"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">fragment</span> DeviceFragment <span class="kw">on</span> Device</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">fragment</span> DeviceUserFragment <span class="kw">on</span> DeviceUser</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">fragment</span> ChargebeeHostedPage <span class="kw">on</span> User</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="kw">fragment</span> PaymentSourceFragment <span class="kw">on</span> ChargebeePaymentSource</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="kw">fragment</span> PaymentSourceCardFragment <span class="kw">on</span> ChargebeePaymentSourceCard</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="kw">fragment</span> PaymentSourceApplePayFragment <span class="kw">on</span> ChargebeePaymentSourceApplePay</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="kw">fragment</span> PaymentSourceGooglePayFragment <span class="kw">on</span> ChargebeePaymentSourceGooglePay</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="kw">fragment</span> PaymentSourcePayPalFragment <span class="kw">on</span> ChargebeePaymentSourcePayPal</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="kw">fragment</span> PaymentSourceDirectDebitFragment <span class="kw">on</span> ChargebeePaymentSourceDirectDebit</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="kw">fragment</span> PaymentSourceGenericFragment <span class="kw">on</span> ChargebeePaymentSourceGeneric</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="kw">fragment</span> FirstPromoterFragment <span class="kw">on</span> FirstPromoterPromoter</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="kw">fragment</span> MutationResponseFragment <span class="kw">on</span> MutationResponse</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="kw">fragment</span> OrderItem <span class="kw">on</span> OrderItem</span></code></pre></div>
<hr />
<h2 id="database-schema">3. DATABASE SCHEMA</h2>
<h3 id="primære-tabeller-postgresqlsupabase">Primære Tabeller
(PostgreSQL/Supabase)</h3>
<h4 id="users">users</h4>
<div class="sourceCode" id="cb10"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="kw">id</span> (uuid, <span class="kw">primary</span> <span class="kw">key</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> cognito_username (<span class="dt">varchar</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> email (<span class="dt">varchar</span>, <span class="kw">unique</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> phone_number (<span class="dt">varchar</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> country_code (<span class="dt">varchar</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> language (<span class="dt">varchar</span>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> created_at (<span class="dt">timestamp</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> updated_at (<span class="dt">timestamp</span>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> first_promoter_id (<span class="dt">varchar</span>, nullable)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> chargebee_customer_id (<span class="dt">varchar</span>, nullable)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> intercom_hash (<span class="dt">varchar</span>, nullable)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> preferred_mfa_setting (<span class="dt">varchar</span>, nullable)</span></code></pre></div>
<h4 id="devices">devices</h4>
<div class="sourceCode" id="cb11"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="kw">id</span> (uuid, <span class="kw">primary</span> <span class="kw">key</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> serial_number (<span class="dt">varchar</span>, <span class="kw">unique</span>, <span class="kw">not</span> <span class="kw">null</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> bt_mac (<span class="dt">varchar</span>, <span class="kw">unique</span>) <span class="co">-- Bluetooth MAC address</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> owner_id (uuid, <span class="kw">foreign</span> <span class="kw">key</span> <span class="op">-&gt;</span> users.<span class="kw">id</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> device_name (<span class="dt">varchar</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> firmware_version (<span class="dt">varchar</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> hardware_version (<span class="dt">varchar</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> certification_standard (<span class="dt">varchar</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> created_at (<span class="dt">timestamp</span>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> updated_at (<span class="dt">timestamp</span>)</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> last_connected_at (<span class="dt">timestamp</span>, nullable)</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> total_km (<span class="dt">decimal</span>)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> sharing_enabled (<span class="dt">boolean</span>, <span class="kw">default</span> <span class="kw">false</span>)</span></code></pre></div>
<h4 id="device_users-sharingaccess-control">device_users (sharing/access
control)</h4>
<div class="sourceCode" id="cb12"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="kw">id</span> (uuid, <span class="kw">primary</span> <span class="kw">key</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> device_id (uuid, <span class="kw">foreign</span> <span class="kw">key</span> <span class="op">-&gt;</span> devices.<span class="kw">id</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> user_id (uuid, <span class="kw">foreign</span> <span class="kw">key</span> <span class="op">-&gt;</span> users.<span class="kw">id</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> access_level (<span class="dt">varchar</span>) <span class="co">-- &#39;OWNER&#39;, &#39;SHARED&#39;, &#39;TEMPORARY&#39;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> granted_at (<span class="dt">timestamp</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> expires_at (<span class="dt">timestamp</span>, nullable)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> granted_by (uuid, <span class="kw">foreign</span> <span class="kw">key</span> <span class="op">-&gt;</span> users.<span class="kw">id</span>)</span></code></pre></div>
<h4 id="device_sharing_otps">device_sharing_otps</h4>
<div class="sourceCode" id="cb13"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="kw">id</span> (uuid, <span class="kw">primary</span> <span class="kw">key</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> device_id (uuid, <span class="kw">foreign</span> <span class="kw">key</span> <span class="op">-&gt;</span> devices.<span class="kw">id</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> otp_code (<span class="dt">varchar</span>, <span class="kw">unique</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> created_by (uuid, <span class="kw">foreign</span> <span class="kw">key</span> <span class="op">-&gt;</span> users.<span class="kw">id</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> created_at (<span class="dt">timestamp</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> expires_at (<span class="dt">timestamp</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> consumed (<span class="dt">boolean</span>, <span class="kw">default</span> <span class="kw">false</span>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> consumed_at (<span class="dt">timestamp</span>, nullable)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> consumed_by (uuid, <span class="kw">foreign</span> <span class="kw">key</span> <span class="op">-&gt;</span> users.<span class="kw">id</span>, nullable)</span></code></pre></div>
<h4 id="subscriptions-chargebee-integration">subscriptions (Chargebee
integration)</h4>
<div class="sourceCode" id="cb14"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="kw">id</span> (uuid, <span class="kw">primary</span> <span class="kw">key</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> user_id (uuid, <span class="kw">foreign</span> <span class="kw">key</span> <span class="op">-&gt;</span> users.<span class="kw">id</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> chargebee_subscription_id (<span class="dt">varchar</span>, <span class="kw">unique</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> status (<span class="dt">varchar</span>) <span class="co">-- &#39;ACTIVE&#39;, &#39;CANCELLED&#39;, &#39;PAUSED&#39;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> plan_id (<span class="dt">varchar</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> current_term_start (<span class="dt">timestamp</span>)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> current_term_end (<span class="dt">timestamp</span>)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> next_billing_at (<span class="dt">timestamp</span>, nullable)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> created_at (<span class="dt">timestamp</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> updated_at (<span class="dt">timestamp</span>)</span></code></pre></div>
<h4 id="invoices">invoices</h4>
<div class="sourceCode" id="cb15"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="kw">id</span> (uuid, <span class="kw">primary</span> <span class="kw">key</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> user_id (uuid, <span class="kw">foreign</span> <span class="kw">key</span> <span class="op">-&gt;</span> users.<span class="kw">id</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> chargebee_invoice_id (<span class="dt">varchar</span>, <span class="kw">unique</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> amount (<span class="dt">decimal</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> currency (<span class="dt">varchar</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> status (<span class="dt">varchar</span>) <span class="co">-- &#39;PAID&#39;, &#39;PENDING&#39;, &#39;FAILED&#39;</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> invoice_date (<span class="dt">timestamp</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> due_date (<span class="dt">timestamp</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> pdf_url (<span class="dt">varchar</span>, nullable)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> created_at (<span class="dt">timestamp</span>)</span></code></pre></div>
<h4 id="device_status_logs">device_status_logs</h4>
<div class="sourceCode" id="cb16"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="kw">id</span> (uuid, <span class="kw">primary</span> <span class="kw">key</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> device_id (uuid, <span class="kw">foreign</span> <span class="kw">key</span> <span class="op">-&gt;</span> devices.<span class="kw">id</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> battery_level (<span class="dt">integer</span>) <span class="co">-- 0-100</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> speed_limit (<span class="dt">integer</span>) <span class="co">-- km/h</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> total_voltage_mv (<span class="dt">integer</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> cell_voltages (jsonb) <span class="co">-- array of cell voltages</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> temperature (<span class="dt">integer</span>, nullable)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> logged_at (<span class="dt">timestamp</span>)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> trip_start_km (<span class="dt">decimal</span>, nullable)</span></code></pre></div>
<h4 id="firmware_versions">firmware_versions</h4>
<div class="sourceCode" id="cb17"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="kw">id</span> (uuid, <span class="kw">primary</span> <span class="kw">key</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> version (<span class="dt">varchar</span>, <span class="kw">unique</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> hardware_compatibility (<span class="dt">varchar</span>[])</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> release_notes (jsonb)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> binary_url (<span class="dt">varchar</span>)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> checksum (<span class="dt">varchar</span>)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> released_at (<span class="dt">timestamp</span>)</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> mandatory (<span class="dt">boolean</span>, <span class="kw">default</span> <span class="kw">false</span>)</span></code></pre></div>
<hr />
<h2 id="aws-cognito-konfiguration">4. AWS COGNITO KONFIGURATION</h2>
<h3 id="user-pool-attributes">User Pool Attributes</h3>
<ul>
<li>email (required, verifiable)</li>
<li>phone_number (verifiable)</li>
<li>preferred_username</li>
<li>custom:country_code</li>
<li>custom:language</li>
<li>custom:chargebee_customer_id</li>
<li>custom:first_promoter_id</li>
</ul>
<h3 id="mfa-configuration">MFA Configuration</h3>
<ul>
<li>Optional MFA</li>
<li>Supported methods:
<ul>
<li>SMS</li>
<li>TOTP (Time-based One-Time Password)</li>
<li>EMAIL_OTP</li>
</ul></li>
</ul>
<h3 id="password-policy">Password Policy</h3>
<ul>
<li>Minimum length: 8 characters</li>
<li>Requires: lowercase, uppercase, numbers</li>
<li>Special characters optional</li>
</ul>
<h3 id="oauth2-flows">OAuth2 Flows</h3>
<ul>
<li>Authorization Code flow</li>
<li>Refresh token rotation enabled</li>
<li>Token expiry: Access (1 hour), Refresh (30 days)</li>
</ul>
<hr />
<h2 id="chargebee-integration">5. CHARGEBEE INTEGRATION</h2>
<h3 id="webhook-events">Webhook Events</h3>
<div class="sourceCode" id="cb18"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>[</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;subscription_created&#39;</span><span class="op">,</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;subscription_cancelled&#39;</span><span class="op">,</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;subscription_renewed&#39;</span><span class="op">,</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;subscription_changed&#39;</span><span class="op">,</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;invoice_generated&#39;</span><span class="op">,</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;payment_succeeded&#39;</span><span class="op">,</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;payment_failed&#39;</span><span class="op">,</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;customer_created&#39;</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>]</span></code></pre></div>
<h3 id="payment-sources">Payment Sources</h3>
<ul>
<li>Credit/Debit Card</li>
<li>Apple Pay</li>
<li>Google Pay</li>
<li>PayPal</li>
<li>SEPA Direct Debit</li>
</ul>
<h3 id="productplans">Product/Plans</h3>
<ul>
<li>Subscription-based model</li>
<li>Monthly billing cycles</li>
<li>Multi-country pricing (EUR, DKK, etc.)</li>
</ul>
<hr />
<h2 id="bluetooth-device-protocol">6. BLUETOOTH DEVICE PROTOCOL</h2>
<h3 id="ble-services-characteristics">BLE Services &amp;
Characteristics</h3>
<h4 id="main-service-uuid">Main Service UUID</h4>
<pre><code>00006880-0000-1000-8000-00805f9b34fb</code></pre>
<h4 id="characteristics">Characteristics</h4>
<div class="sourceCode" id="cb20"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">// OTA Firmware Update</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>OTA_WRITE_NO_RESPONSE_UUID<span class="op">:</span> <span class="st">&quot;00006881-0000-1000-8000-00805f9b34fb&quot;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>OTA_INDICATE_UUID<span class="op">:</span> <span class="st">&quot;00006882-0000-1000-8000-00805f9b34fb&quot;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">// Device Control</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>DEVICE_CONTROL_UUID<span class="op">:</span> <span class="st">&quot;00006883-0000-1000-8000-00805f9b34fb&quot;</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co">// Device Status (notifications)</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>DEVICE_STATUS_UUID<span class="op">:</span> <span class="st">&quot;00006884-0000-1000-8000-00805f9b34fb&quot;</span></span></code></pre></div>
<h3 id="device-commands">Device Commands</h3>
<ul>
<li>Lock/Unlock</li>
<li>Get Status (battery, speed, voltage, etc.)</li>
<li>Set Speed Limit</li>
<li>Get/Set Certification Standard</li>
<li>Firmware Upgrade</li>
<li>Factory Reset (REDI mode)</li>
</ul>
<h3 id="status-data-format">Status Data Format</h3>
<div class="sourceCode" id="cb21"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">battery_level</span><span class="op">:</span> number<span class="op">,</span> <span class="co">// 0-100</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">speed_limit</span><span class="op">:</span> number<span class="op">,</span> <span class="co">// km/h</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">total_voltage_mv</span><span class="op">:</span> number<span class="op">,</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">cell_voltages</span><span class="op">:</span> number[]<span class="op">,</span> <span class="co">// Individual cell voltages</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">trip_start_km</span><span class="op">:</span> number<span class="op">,</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">total_km</span><span class="op">:</span> number<span class="op">,</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">motor_resistance_ohm</span><span class="op">:</span> number<span class="op">,</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">temperature</span><span class="op">:</span> number <span class="co">// optional</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h2 id="websocket-stream-protocol">7. WEBSOCKET STREAM PROTOCOL</h2>
<h3 id="connection">Connection</h3>
<div class="sourceCode" id="cb22"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Development</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>ws<span class="op">:</span><span class="co">//localhost:8969/stream</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">// Production  </span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>wss<span class="op">:</span><span class="co">//[domain]:8969/stream</span></span></code></pre></div>
<h3 id="message-types">Message Types</h3>
<div class="sourceCode" id="cb23"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Device location updates</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;LOCATION_UPDATE&#39;</span><span class="op">,</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">payload</span><span class="op">:</span> {</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">device_id</span><span class="op">:</span> string<span class="op">,</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">latitude</span><span class="op">:</span> number<span class="op">,</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">longitude</span><span class="op">:</span> number<span class="op">,</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">timestamp</span><span class="op">:</span> string</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Device status updates</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;STATUS_UPDATE&#39;</span><span class="op">,</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  <span class="dt">payload</span><span class="op">:</span> {</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">device_id</span><span class="op">:</span> string<span class="op">,</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">battery_level</span><span class="op">:</span> number<span class="op">,</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">is_locked</span><span class="op">:</span> boolean<span class="op">,</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">timestamp</span><span class="op">:</span> string</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Firmware upgrade progress</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;FIRMWARE_PROGRESS&#39;</span><span class="op">,</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>  <span class="dt">payload</span><span class="op">:</span> {</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">device_id</span><span class="op">:</span> string<span class="op">,</span></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">progress</span><span class="op">:</span> number<span class="op">,</span> <span class="co">// 0-100</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">status</span><span class="op">:</span> <span class="st">&#39;IN_PROGRESS&#39;</span> <span class="op">|</span> <span class="st">&#39;COMPLETED&#39;</span> <span class="op">|</span> <span class="st">&#39;FAILED&#39;</span></span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h2 id="referral-system">8. REFERRAL SYSTEM</h2>
<h3 id="url-format">URL Format</h3>
<pre><code>https://augment.eco?ref=[REFERRAL_CODE]</code></pre>
<h3 id="share-message-multi-language">Share Message
(Multi-language)</h3>
<pre><code>Danish: &quot;Je krijgt 5% korting als je lid wordt van augment.eco met mijn verwijzingscode&quot;
Italian: &quot;Riceverai uno sconto del 5% quando ti iscrivi a augment.eco con il mio codice di riferimento&quot;
German: &quot;Du erhältst 5% Rabatt, wenn du dich mit meinem Empfehlungscode bei augment.eco anmeldest&quot;</code></pre>
<h3 id="first-promoter-integration">First Promoter Integration</h3>
<ul>
<li>Track referrals</li>
<li>Discount application</li>
<li>Commission tracking</li>
</ul>
<hr />
<h2 id="firmware-ota-updates">9. FIRMWARE OTA UPDATES</h2>
<h3 id="update-flow">Update Flow</h3>
<ol type="1">
<li>Check for available firmware via GraphQL query</li>
<li>Download firmware binary from S3</li>
<li>Verify checksum</li>
<li>Connect to device via BLE</li>
<li>Write firmware chunks to OTA characteristic</li>
<li>Monitor progress via indications</li>
<li>Device reboots with new firmware</li>
</ol>
<h3 id="binary-format">Binary Format</h3>
<ul>
<li>Encrypted firmware binary</li>
<li>Chunk size: 244 bytes</li>
<li>Protocol: Nordic DFU or custom protocol</li>
</ul>
<hr />
<h2 id="multi-language-support">10. MULTI-LANGUAGE SUPPORT</h2>
<h3 id="supported-languages">Supported Languages</h3>
<ul>
<li>English (en)</li>
<li>Danish (da)</li>
<li>German (de)</li>
<li>Italian (it)</li>
<li>Dutch (nl)</li>
<li>Spanish (es)</li>
</ul>
<h3 id="i18n-keys-structure">i18n Keys Structure</h3>
<div class="sourceCode" id="cb26"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;onboarding&quot;</span><span class="op">:</span> { <span class="op">...</span> }<span class="op">,</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;device&quot;</span><span class="op">:</span> { <span class="op">...</span> }<span class="op">,</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;payment&quot;</span><span class="op">:</span> { <span class="op">...</span> }<span class="op">,</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;settings&quot;</span><span class="op">:</span> { <span class="op">...</span> }<span class="op">,</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;errors&quot;</span><span class="op">:</span> { <span class="op">...</span> }<span class="op">,</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;notifications&quot;</span><span class="op">:</span> { <span class="op">...</span> }</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h2 id="push-notifications">11. PUSH NOTIFICATIONS</h2>
<h3 id="providers">Providers</h3>
<ul>
<li>Firebase Cloud Messaging (Android/iOS)</li>
<li>OneSignal (fallback/additional)</li>
</ul>
<h3 id="notification-types">Notification Types</h3>
<ul>
<li>Device unlocked/locked</li>
<li>Battery low warning</li>
<li>Payment successful/failed</li>
<li>Firmware update available</li>
<li>Sharing request</li>
<li>Mandatory app update</li>
</ul>
<hr />
<h2 id="analytics-monitoring">12. ANALYTICS &amp; MONITORING</h2>
<h3 id="sentry-configuration">Sentry Configuration</h3>
<div class="sourceCode" id="cb27"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">dsn</span><span class="op">:</span> <span class="st">&quot;https://c1dfb07d783ad5325c245c1fd3725390@o447951.ingest.sentry.io/4509632503087104&quot;</span><span class="op">,</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">environment</span><span class="op">:</span> <span class="st">&quot;production&quot;</span><span class="op">,</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">tracesSampleRate</span><span class="op">:</span> <span class="fl">1.0</span><span class="op">,</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">profilesSampleRate</span><span class="op">:</span> <span class="fl">1.0</span><span class="op">,</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">enableNative</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">enableAutoPerformanceTracing</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="tracked-events">Tracked Events</h3>
<ul>
<li>API errors</li>
<li>BLE connection failures</li>
<li>Payment errors</li>
<li>App crashes</li>
<li>Performance metrics (FCP, LCP, CLS)</li>
</ul>
<hr />
<h2 id="environment-variables">13. ENVIRONMENT VARIABLES</h2>
<pre class="env"><code># AWS
AWS_REGION=eu-west-1
AWS_COGNITO_USER_POOL_ID=[pool_id]
AWS_COGNITO_CLIENT_ID=[client_id]
AWS_COGNITO_IDENTITY_POOL_ID=[identity_pool_id]

# API
GRAPHQL_API_ENDPOINT=https://frbc72oc4h.execute-api.eu-west-1.amazonaws.com/prod/graphql-public
WEBSOCKET_ENDPOINT=wss://[domain]:8969/stream

# Supabase
SUPABASE_URL=[your_supabase_url]
SUPABASE_ANON_KEY=[your_anon_key]
SUPABASE_SERVICE_ROLE_KEY=[your_service_role_key]

# Chargebee
CHARGEBEE_SITE=[site_name]
CHARGEBEE_API_KEY=[api_key]
CHARGEBEE_WEBHOOK_SECRET=[webhook_secret]

# Firebase
FIREBASE_API_KEY=[api_key]
FIREBASE_PROJECT_ID=[project_id]
FIREBASE_MESSAGING_SENDER_ID=[sender_id]

# Sentry
SENTRY_DSN=https://c1dfb07d783ad5325c245c1fd3725390@o447951.ingest.sentry.io/4509632503087104

# Intercom
INTERCOM_APP_ID=[app_id]
INTERCOM_API_KEY=[api_key]

# OneSignal
ONESIGNAL_APP_ID=[app_id]

# First Promoter
FIRST_PROMOTER_API_KEY=[api_key]
FIRST_PROMOTER_TID=[tracking_id]

# S3 Storage
AWS_S3_BUCKET_FIRMWARE=[bucket_name]
AWS_S3_BUCKET_ASSETS=[bucket_name]</code></pre>
<hr />
<h2 id="security-considerations">14. SECURITY CONSIDERATIONS</h2>
<h3 id="api-security">API Security</h3>
<ul>
<li>JWT tokens via Cognito</li>
<li>Rate limiting on API Gateway</li>
<li>CORS configuration for allowed origins</li>
<li>Request signing for sensitive operations</li>
</ul>
<h3 id="data-encryption">Data Encryption</h3>
<ul>
<li>TLS 1.2+ for all connections</li>
<li>Encrypted firmware binaries</li>
<li>PII encryption in database</li>
<li>Secure BLE pairing</li>
</ul>
<h3 id="compliance">Compliance</h3>
<ul>
<li>GDPR compliant</li>
<li>Data retention policies</li>
<li>Right to deletion implementation</li>
<li>Privacy policy enforcement</li>
</ul>
<hr />
<h2 id="deployment-architecture">15. DEPLOYMENT ARCHITECTURE</h2>
<h3 id="aws-lambda-functions">AWS Lambda Functions</h3>
<pre><code>- graphql-api (main GraphQL resolver)
- auth-triggers (Cognito pre/post hooks)
- chargebee-webhooks
- firmware-processor
- device-status-processor
- notification-sender</code></pre>
<h3 id="database-migrations">Database Migrations</h3>
<ul>
<li>Use Supabase migrations</li>
<li>Version controlled SQL files</li>
<li>Rollback procedures</li>
</ul>
<h3 id="cicd-pipeline">CI/CD Pipeline</h3>
<ul>
<li>GitHub Actions / GitLab CI</li>
<li>Automated testing</li>
<li>Staging → Production promotion</li>
<li>Database migration automation</li>
</ul>
<hr />
<h2 id="implementation-checklist">16. IMPLEMENTATION CHECKLIST</h2>
<h3 id="phase-1-infrastructure-setup">Phase 1: Infrastructure Setup</h3>
<ul class="task-list">
<li><label><input type="checkbox" />Set up AWS account and
services</label></li>
<li><label><input type="checkbox" />Create Cognito User
Pool</label></li>
<li><label><input type="checkbox" />Set up Supabase PostgreSQL
database</label></li>
<li><label><input type="checkbox" />Configure S3 buckets</label></li>
<li><label><input type="checkbox" />Set up API Gateway</label></li>
</ul>
<h3 id="phase-2-core-backend">Phase 2: Core Backend</h3>
<ul class="task-list">
<li><label><input type="checkbox" />Implement GraphQL
schema</label></li>
<li><label><input type="checkbox" />Create database tables and
migrations</label></li>
<li><label><input type="checkbox" />Implement authentication
flow</label></li>
<li><label><input type="checkbox" />Build device management
APIs</label></li>
<li><label><input type="checkbox" />Create sharing/OTP
system</label></li>
</ul>
<h3 id="phase-3-integrations">Phase 3: Integrations</h3>
<ul class="task-list">
<li><label><input type="checkbox" />Integrate Chargebee
payments</label></li>
<li><label><input type="checkbox" />Set up Firebase/OneSignal
notifications</label></li>
<li><label><input type="checkbox" />Configure Sentry
monitoring</label></li>
<li><label><input type="checkbox" />Implement Intercom
support</label></li>
<li><label><input type="checkbox" />Set up First Promoter
referrals</label></li>
</ul>
<h3 id="phase-4-real-time-ble">Phase 4: Real-time &amp; BLE</h3>
<ul class="task-list">
<li><label><input type="checkbox" />Build WebSocket server</label></li>
<li><label><input type="checkbox" />Implement device protocol
handlers</label></li>
<li><label><input type="checkbox" />Create firmware OTA
system</label></li>
<li><label><input type="checkbox" />Build status streaming</label></li>
</ul>
<h3 id="phase-5-testing-deployment">Phase 5: Testing &amp;
Deployment</h3>
<ul class="task-list">
<li><label><input type="checkbox" />Unit tests</label></li>
<li><label><input type="checkbox" />Integration tests</label></li>
<li><label><input type="checkbox" />Load testing</label></li>
<li><label><input type="checkbox" />Security audit</label></li>
<li><label><input type="checkbox" />Production deployment</label></li>
</ul>
<hr />
<h2 id="api-rate-limits">17. API RATE LIMITS</h2>
<pre><code>Authenticated requests: 1000/hour per user
Anonymous requests: 100/hour per IP
WebSocket connections: 5 concurrent per user
Firmware downloads: 10/day per device</code></pre>
<hr />
<h2 id="sample-graphql-requests">18. SAMPLE GRAPHQL REQUESTS</h2>
<h3 id="claim-device-ownership">Claim Device Ownership</h3>
<div class="sourceCode" id="cb31"><pre
class="sourceCode graphql"><code class="sourceCode graphql"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">mutation</span> ClaimDevice {</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  ClaimDeviceOwnership(<span class="kw">input</span>: {</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    serialNumber: <span class="st">&quot;ABC123456&quot;</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    btMac: <span class="st">&quot;AA:BB:CC:DD:EE:FF&quot;</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  }) {</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    success</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    message</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    device {</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>      id</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>      deviceName</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>      firmwareVersion</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="generate-sharing-otp">Generate Sharing OTP</h3>
<div class="sourceCode" id="cb32"><pre
class="sourceCode graphql"><code class="sourceCode graphql"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">mutation</span> ShareDevice {</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  ShareDeviceOtp(<span class="kw">input</span>: {</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    deviceId: <span class="st">&quot;uuid-here&quot;</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    expiresInHours: <span class="dv">24</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  }) {</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    success</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    otpCode</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    shareUrl</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    expiresAt</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="get-device-status">Get Device Status</h3>
<div class="sourceCode" id="cb33"><pre
class="sourceCode graphql"><code class="sourceCode graphql"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">query</span> GetDevice {</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  DeviceQuery(<span class="kw">input</span>: { deviceId: <span class="st">&quot;uuid-here&quot;</span> }) {</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    id</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    deviceName</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    serialNumber</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    firmwareVersion</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    lastStatus {</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>      batteryLevel</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>      speedLimit</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>      totalKm</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>      lastConnectedAt</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h2 id="error-codes">19. ERROR CODES</h2>
<div class="sourceCode" id="cb34"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Authentication</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;AUTH_001&#39;</span><span class="op">:</span> <span class="st">&#39;Invalid credentials&#39;</span><span class="op">,</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;AUTH_002&#39;</span><span class="op">:</span> <span class="st">&#39;MFA required&#39;</span><span class="op">,</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;AUTH_003&#39;</span><span class="op">:</span> <span class="st">&#39;Token expired&#39;</span><span class="op">,</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;AUTH_004&#39;</span><span class="op">:</span> <span class="st">&#39;User not verified&#39;</span><span class="op">,</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Device</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;DEV_001&#39;</span><span class="op">:</span> <span class="st">&#39;Device not found&#39;</span><span class="op">,</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;DEV_002&#39;</span><span class="op">:</span> <span class="st">&#39;Device already claimed&#39;</span><span class="op">,</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;DEV_003&#39;</span><span class="op">:</span> <span class="st">&#39;Invalid serial number&#39;</span><span class="op">,</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;DEV_004&#39;</span><span class="op">:</span> <span class="st">&#39;Bluetooth connection failed&#39;</span><span class="op">,</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;DEV_005&#39;</span><span class="op">:</span> <span class="st">&#39;Firmware upgrade failed&#39;</span><span class="op">,</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Payment</span></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;PAY_001&#39;</span><span class="op">:</span> <span class="st">&#39;Payment failed&#39;</span><span class="op">,</span></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;PAY_002&#39;</span><span class="op">:</span> <span class="st">&#39;Invalid payment method&#39;</span><span class="op">,</span></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;PAY_003&#39;</span><span class="op">:</span> <span class="st">&#39;Subscription inactive&#39;</span><span class="op">,</span></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Sharing</span></span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;SHR_001&#39;</span><span class="op">:</span> <span class="st">&#39;Invalid OTP&#39;</span><span class="op">,</span></span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;SHR_002&#39;</span><span class="op">:</span> <span class="st">&#39;OTP expired&#39;</span><span class="op">,</span></span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;SHR_003&#39;</span><span class="op">:</span> <span class="st">&#39;Sharing not enabled&#39;</span></span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h2 id="testing-endpoints">20. TESTING ENDPOINTS</h2>
<h3 id="health-check">Health Check</h3>
<pre><code>GET /health
Response: { &quot;status&quot;: &quot;ok&quot;, &quot;timestamp&quot;: &quot;2024-01-01T00:00:00Z&quot; }</code></pre>
<h3 id="api-version">API Version</h3>
<pre><code>GET /version
Response: { &quot;version&quot;: &quot;1.0.0&quot;, &quot;graphql&quot;: &quot;16.6.0&quot; }</code></pre>
<hr />
<p>Dette dokument indeholder alle nødvendige detaljer til at klone
Augment e-scooter platformens backend. For yderligere detaljer om
specifik implementering, referer til den originale APK eller kontakt
udviklerne.</p>
<p><strong>Generated</strong>: 2024-12-25 <strong>Based on</strong>:
Augment - Kopi.apk (Android app version detected in analysis)</p>
</body>
</html>
